
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Components Â· Kiln</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-bootstrap-callout/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="manipulating-components.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="./">
            
                <a href="./#installation">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="./">
            
                <a href="./#usage">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="./">
            
                <a href="./#user-experience">
            
                    
                    User Experience
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="components.html">
            
                <a href="components.html">
            
                    
                    Components
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="manipulating-components.html">
            
                <a href="manipulating-components.html">
            
                    
                    Manipulating Components
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="manipulating-components.html">
            
                <a href="manipulating-components.html#basic-lists">
            
                    
                    Component Lists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="manipulating-components.html">
            
                <a href="manipulating-components.html#head-lists">
            
                    
                    Head Lists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="manipulating-components.html">
            
                <a href="manipulating-components.html#invisible-lists">
            
                    
                    Invisible Lists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="manipulating-components.html">
            
                <a href="manipulating-components.html#page-areas">
            
                    
                    Page Areas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="manipulating-components.html">
            
                <a href="manipulating-components.html#site-specific-components">
            
                    
                    Site-Specific Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="manipulating-components.html">
            
                <a href="manipulating-components.html#fuzzy-lists">
            
                    
                    Fuzzy Lists
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="editing-components.html">
            
                <a href="editing-components.html">
            
                    
                    Editing Components
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="editing-components.html">
            
                <a href="editing-components.html#inline-wysiwyg">
            
                    
                    Inline WYSIWYG
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="editing-components.html">
            
                <a href="editing-components.html#placeholders">
            
                    
                    Placeholders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="editing-components.html">
            
                <a href="editing-components.html#editing-components-with-forms">
            
                    
                    Overlay Forms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="editing-components.html">
            
                <a href="editing-components.html#groups">
            
                    
                    Groups
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="editing-components.html">
            
                <a href="editing-components.html#settings-group">
            
                    
                    Settings Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="editing-components.html">
            
                <a href="editing-components.html#tabbed-form-sections">
            
                    
                    Tabbed Forms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="editing-components.html">
            
                <a href="editing-components.html#field-configuration">
            
                    
                    Fields
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.8" data-path="editing-components.html">
            
                <a href="editing-components.html#cross-component-communication">
            
                    
                    Cross Component Communication
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="kiln-ui.html">
            
                <a href="kiln-ui.html">
            
                    
                    The Kiln UI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="kiln-ui.html">
            
                <a href="kiln-ui.html#view-mode">
            
                    
                    View Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="kiln-ui.html">
            
                <a href="kiln-ui.html#edit-mode">
            
                    
                    Edit Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="kiln-ui.html">
            
                <a href="kiln-ui.html#component-selectors">
            
                    
                    Component Selectors
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="api.html">
            
                <a href="api.html">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="api.html">
            
                <a href="api.html#css-classes">
            
                    
                    CSS Classes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="api.html">
            
                <a href="api.html#javascript-utilities">
            
                    
                    JS Utils
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="api.html">
            
                <a href="api.html#vue-components">
            
                    
                    Vue Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="api.html">
            
                <a href="api.html#vuex-state">
            
                    
                    Vuex State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="vuex-actions.md">
            
                <span>
            
                    
                    Vuex Actions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="GLOSSARY.html">
            
                <a href="GLOSSARY.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Components</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="components">Components</h1>
<p><a href="https://github.com/nymag/amphora/wiki#clay-is-divided-into-components" target="_blank">Components are reusable, configurable, self-contained bits of the web.</a></p>
<p>Components in Clay consist of templates, styles, JavaScript models (data handling) and controllers (client-side functionality), as well as <code>schema.yml</code> files that define how they&apos;re edited with Kiln. General information on components is available in the <a href="http://clay.github.io/amphora/" target="_blank">Amphora docs</a>, so this section will limit itself to discussing the requirements needed to edit components in Kiln.</p>
<h2 id="template">Template</h2>
<p>Kiln assumes that every component has a <a href="http://handlebarsjs.com/" target="_blank">Handlebars</a> template, and that it uses <code>data-uri</code> to reference the URI of the component instance. For regular components that live in the <code>&lt;body&gt;</code> of a page, you must use a <em>single root tag</em> that contains <code>data-uri</code>:</p>
<pre><code class="lang-handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-uri</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">{{ default _ref _self}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>
<span class="hljs-comment">&lt;!-- stuff inside the component, including elements and &lt;style&gt; tags --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span></code></pre>
<p>For components that live in the <code>&lt;head&gt;</code> of the page, templates are handled a little differently. As <code>&lt;meta&gt;</code> tags cannot contain child elements (almost all <code>&lt;head&gt;</code> components consist of <code>&lt;meta&gt;</code> tags), you must use an html comment at the beginning of your component:</p>
<pre><code class="lang-handlebars"><span class="xml"><span class="hljs-comment">&lt;!-- data-uri=&quot;</span></span><span class="hljs-template-variable">{{ default _ref _self}}</span><span class="xml"><span class="hljs-comment">&quot; --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;something&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;something else&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;another thing&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;another bit of data&quot;</span> /&gt;</span>
</span></code></pre>
<p>The root element of <code>&lt;body&gt;</code> components may include other attributes, such as <code>data-editable</code> or <code>data-placeholder</code> (more on those in Editing Components), and must be <em>relatively positioned</em> so the Component Selectors can display correctly.</p>
<div class="callout callout-info"><h4 id="note">Note</h4><div><p>Templates must be precompiled and added to <code>window.kiln.componentTemplates</code> for Kiln to re-render components after saving.</p></div></div>
<h2 id="model-and-controller">Model and Controller</h2>
<p>Models (<code>model.js</code>) and controllers (<code>client.js</code> or <code>controller.js</code>) are two types of JavaScript files your components may contain (a third &#x2014; <code>upgrade.js</code> &#x2014; is <a href="http://clay.github.io/amphora/docs/upgrade.html" target="_blank">only used in Amphora</a>). Models allow components to perform logic on their data before saving and rendering, while controllers add client-side functionality to components. Both are optional.</p>
<p>Controllers are <em>never</em> run in edit mode, as they have the potential to interfere with Kiln. This means that certain embeds (which rely on 3rd party JavaScript) may need styling in edit mode. You may take advantage of the <code>.kiln-edit-mode</code> class on the <code>&lt;body&gt;</code> tag for this purpose.</p>
<p>Models are called when components save and re-render themselves. Both the <code>save()</code> and <code>render()</code> methods are optional, as many components require either one or the other. They both have the same function signature, and may return objects (the component data) or promises (that resolve to the component data).</p>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports.save = (uri, data, locals) =&gt; {
<span class="hljs-comment">// do some logic, then return the data that should save into the db</span>
};

<span class="hljs-built_in">module</span>.exports.render = (uri, data, locals) =&gt; {
<span class="hljs-comment">// do some logic, then return the data that should be sent to handlebars</span>
};
</code></pre>
<div class="callout callout-info"><h4 id="note">Note</h4><div><p>If in doubt, use the <code>save()</code> method, as it only runs when data is saved. Calling the <code>render()</code> method (every time a component renders) to do slow or intensive logic will slow down your component for end-users.</p></div></div>
<p>Models must be compiled and added to <code>window.kiln.componentModels</code> for Kiln to call them when saving and re-rendering components.</p>
<h2 id="schema">Schema</h2>
<p>Schemas (or <em>schemata</em>, for pedants like myself) are the main connective tissue between components and Kiln. They define what kinds of fields components have, as well as how those fields are grouped. They also provide <code>_description</code> text for the components&apos; Info Modals.</p>
<p>Schemas for components that are currently on the page are automatically parsed by Amphora and added to the page when Kiln loads. Schemas for other components are added when those components are added.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./#user-experience" class="navigation navigation-prev " aria-label="Previous page: User Experience">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="manipulating-components.html" class="navigation navigation-next " aria-label="Next page: Manipulating Components">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Components","level":"1.2","depth":1,"next":{"title":"Manipulating Components","level":"1.2.1","depth":2,"path":"manipulating-components.md","ref":"manipulating-components.md","articles":[{"title":"Component Lists","level":"1.2.1.1","depth":3,"anchor":"#basic-lists","path":"manipulating-components.md","ref":"manipulating-components.md#basic-lists","articles":[]},{"title":"Head Lists","level":"1.2.1.2","depth":3,"anchor":"#head-lists","path":"manipulating-components.md","ref":"manipulating-components.md#head-lists","articles":[]},{"title":"Invisible Lists","level":"1.2.1.3","depth":3,"anchor":"#invisible-lists","path":"manipulating-components.md","ref":"manipulating-components.md#invisible-lists","articles":[]},{"title":"Page Areas","level":"1.2.1.4","depth":3,"anchor":"#page-areas","path":"manipulating-components.md","ref":"manipulating-components.md#page-areas","articles":[]},{"title":"Site-Specific Components","level":"1.2.1.5","depth":3,"anchor":"#site-specific-components","path":"manipulating-components.md","ref":"manipulating-components.md#site-specific-components","articles":[]},{"title":"Fuzzy Lists","level":"1.2.1.6","depth":3,"anchor":"#fuzzy-lists","path":"manipulating-components.md","ref":"manipulating-components.md#fuzzy-lists","articles":[]}]},"previous":{"title":"User Experience","level":"1.1.3","depth":2,"anchor":"#user-experience","path":"intro.md","ref":"intro.md#user-experience","articles":[]},"dir":"ltr"},"config":{"plugins":["github","anchorjs","bootstrap-callout"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/clay/clay-kiln/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"bootstrap-callout":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"intro.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Kiln","gitbook":"3.2.3"},"file":{"path":"components.md","mtime":"2017-11-07T21:31:16.662Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-11-08T21:15:50.870Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

